(function(){"use strict";var e={2229:function(e,t,o){var n=o(7195),s=function(){var e=this,t=e._self._c;return t("div",[e._m(0),t("div",[t("DashBoard",{attrs:{msg:"Hello Vue in CodeSandbox!"}})],1)])},a=[function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("Take Note")])])}],r=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:8,xs:24}},[t("SideList",{attrs:{notes:e.notes,note:e.note,tags:e.tags},on:{setnote:e.handleSetNote,addnote:e.handleAddNote,removenote:e.handleRemoveNote}})],1),e.isMobile?t("el-col",{staticClass:"notemobile",style:{display:"view"===e.mode?"inherit":"none"},attrs:{span:16,xs:24}},[t("div",{staticStyle:{"padding-bottom":"5px"},on:{click:function(t){return e.changeMode("list")}}},[t("i",{staticClass:"el-icon-back"}),e._v(" Back ")]),t("Note",{attrs:{note:e.note,tags:e.tags},on:{savenote:e.handleSaveNote,updatetags:e.handleUpdateTags}})],1):t("el-col",{staticClass:"note",attrs:{span:16,xs:24}},[t("Note",{attrs:{note:e.note,tags:e.tags},on:{savenote:e.handleSaveNote,updatetags:e.handleUpdateTags}})],1)],1)},i=[];o(7658);const l="notes-db",c=1;function d(){return new Promise(((e,t)=>{const o=indexedDB.open(l,c);o.onupgradeneeded=e=>{const t=e.target.result,o=t.createObjectStore("notes",{keyPath:"id",autoIncrement:!0});o.createIndex("updated","updated",{unique:!1})},o.onerror=()=>{t(Error("Failed to open database"))},o.onsuccess=()=>{e(o.result)}}))}function u(e){return new Promise(((t,o)=>{d().then((n=>{const s=n.transaction(["notes"],"readwrite"),a=s.objectStore("notes"),r=a.get(e);r.onerror=()=>{o(Error("Failed to save note"))},r.onsuccess=()=>{t(r.result)}}))}))}function h(e){return new Promise(((t,o)=>{d().then((n=>{const s=n.transaction(["notes"],"readwrite"),a=s.objectStore("notes"),r=a.add(e);r.onerror=()=>{o(Error("Failed to save note"))},r.onsuccess=()=>{t(r.result)}}))}))}function m(e){return new Promise(((t,o)=>{d().then((n=>{const s=n.transaction(["notes"],"readwrite"),a=s.objectStore("notes"),r=a.put(e);r.onerror=()=>{o(Error("Failed to save note"))},r.onsuccess=()=>{t(r.result)}}))}))}function p(){return new Promise(((e,t)=>{d().then((o=>{const n=o.transaction(["notes"],"readonly"),s=n.objectStore("notes"),a=s.getAll();a.onerror=()=>{t(Error("Failed to get notes"))},a.onsuccess=()=>{e(a.result)}}))}))}function g(e){return new Promise(((t,o)=>{d().then((n=>{const s=n.transaction(["notes"],"readwrite"),a=s.objectStore("notes"),r=a.delete(e);r.onerror=()=>{o(Error("Failed to delete note"))},r.onsuccess=()=>{t(r.result)}}))}))}var v=function(){var e=this,t=e._self._c;return t("el-row",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("div",{staticStyle:{"text-align":"left"}},[t("el-select",{attrs:{placeholder:"Select"},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}},e._l(e.sortOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),t("el-col",{attrs:{span:8}},[t("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"Tags"},on:{change:e.handleTagChange},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}},e._l(e.tags,(function(e){return t("el-option",{key:e+"sidenote",attrs:{label:e,value:e}})})),1)],1),t("el-col",{attrs:{span:8}},[t("div",{staticStyle:{"text-align":"right"}},[t("span",{staticStyle:{"padding-right":"20px"}},[e._v(e._s(e.mynotes.length)+" / "+e._s(e.notes.length)+" Notes")]),t("el-button",{staticClass:"add-note-btn",attrs:{size:"small",round:""},on:{click:function(t){return e.addNote()}}},[e._v("+ Add Note")])],1)])],1)],1),t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-input",{attrs:{placeholder:"search notes ...",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("div",{staticStyle:{"max-height":"70vh","overflow-y":"auto"}},e._l(e.mynotes,(function(o){return t("div",{key:o.id,on:{click:function(t){return e.setNote(o)}}},[t("note-unit",{attrs:{noteobj:o,note:e.note},on:{removenote:e.handleRemove}})],1)})),0)])},f=[],y=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-bottom":"8px"},on:{mouseover:function(t){e.close=!0},mouseleave:function(t){e.close=!1}}},[t("el-card",{staticClass:"box-card note-list-unit",class:{active:e.note.id===e.noteobj.id}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.close,expression:"close"}],staticStyle:{position:"absolute"}},[t("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("p",[e._v("Are you sure to delete this?")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("cancel")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleDeleteNote(e.note),e.visible=!1}}},[e._v("confirm")])],1),t("el-button",{attrs:{slot:"reference",type:"danger",size:"small",round:""},slot:"reference"},[e._v("X")])],1)],1),t("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e._f("trim")(e.noteobj.title,40)))]),t("el-row",{staticStyle:{"font-size":"smaller","padding-top":"10px"}},[t("el-col",{attrs:{span:12}},[e._v("Created :"+e._s(e._f("updatedFormatDate")(e.noteobj.created)))]),t("el-col",{attrs:{span:12}},[e._v("Updated : "+e._s(e._f("updatedFormatDate")(e.noteobj.updated)))])],1)],1)],1)},b=[],w={props:["noteobj","note"],data(){return{close:!1,visible:!1}},methods:{handleDeleteNote(e){this.$emit("removenote",e)}},filters:{trim(e="",t=10){return e.length<=30?e:e.slice(0,t)+"..."},updatedFormatDate(e){const t=new Date(e),o=new Date,n=(o.getTime()-t.getTime())/1e3;if(n<60)return Math.floor(n)+" seconds ago";if(n<3600){const e=Math.floor(n/60);return 1===e?"1 minute ago":e+" minutes ago"}if(n<86400){const e=Math.floor(n/3600);return 1===e?"1 hour ago":e+" hours ago"}if(n<432e3){const e=Math.floor(n/86400);return 1===e?"1 day ago":e+" days ago"}{const e={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",e)}},formatDate(e){try{e||(e=new Date);let t=e.toLocaleString("default",{month:"short"});return`${e.getDate()}-${t}-${e.getFullYear()}`}catch(t){e=new Date;let o=e.toLocaleString("default",{month:"short"});return`${e.getDate()}-${o}-${e.getFullYear()}`}}}},S=w,N=o(1001),_=(0,N.Z)(S,y,b,!1,null,"52432768",null),x=_.exports,T={props:["notes","note","tags"],data(){return{mynotes:[],sortOptions:[{label:"Last Updated Notes",value:"updatedDesc"},{label:"Old Created Notes",value:"createdAsc"},{label:"Oldest  Updated Notes",value:"updatedAsc"},{label:"Latest  Created Notes",value:"createdDesc"}],search:"",close:!1,sortBy:"updatedDesc",selectedTags:[]}},watch:{notes(){this.mynotes=this.notes},sortBy(){this.sortNotes()},search(){this.search?this.search.trim()&&(this.search.length<3||(this.mynotes=this.mynotes.filter((e=>{const t=e.title||"";return t.match(new RegExp(this.search,"i"))||Array.isArray(e.tags)&&e.tags.includes(this.search)})))):this.mynotes=this.notes}},methods:{addNote(){this.$emit("addnote")},sortNotes(){this.mynotes=this.mynotes.sort(((e,t)=>(e.created=e.created?new Date(e.created):new Date,e.updated=e.updated?new Date(e.updated):new Date,t.updated=t.updated?new Date(t.updated):new Date,t.created=t.created?new Date(t.created):new Date,"createdAsc"===this.sortBy?e.created.getTime()-t.created.getTime():"createdDesc"===this.sortBy?t.created.getTime()-e.created.getTime():"updatedAsc"===this.sortBy?e.updated.getTime()-t.updated.getTime():"updatedDesc"===this.sortBy?t.updated.getTime()-e.updated.getTime():e.title)))},setNote(e){this.$emit("setnote",e)},handleRemove(e){this.$emit("removenote",e)},handleTagChange(){this.selectedTags.length?this.mynotes=this.mynotes.filter((e=>Array.isArray(e.tags)&&e.tags.some((e=>this.selectedTags.includes(e))))):this.mynotes=this.notes}},mounted(){this.sortNotes()},components:{NoteUnit:x}},D=T,k=(0,N.Z)(D,v,f,!1,null,"6ba07fbc",null),O=k.exports,j=function(){var e=this,t=e._self._c;return t("el-row",[e.editMode?t("div",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-input",{attrs:{placeholder:"Title goes here ..."},on:{change:e.saveNote},model:{value:e.mynote.title,callback:function(t){e.$set(e.mynote,"title",t)},expression:"mynote.title"}})],1),t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter your tags here..."},on:{change:e.saveNote},model:{value:e.mynote.tags,callback:function(t){e.$set(e.mynote,"tags",t)},expression:"mynote.tags"}},e._l(e.tags||[],(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("vue-editor",{ref:"editor",staticClass:"margin-bottom10",staticStyle:{height:"700px","overflow-y":"scroll"},model:{value:e.mynote.body,callback:function(t){e.$set(e.mynote,"body",t)},expression:"mynote.body"}})],1):t("div")])},A=[],M=o(5335),$={props:["note","tags"],data(){return{mynote:{},editMode:!0,saveTimeout:null,isMobile:/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent)}},components:{VueEditor:M.bR},watch:{note(){console.log("this.mynote",this.mynote),console.log("this.note",this.note),this.mynote=Object.assign({},this.note)}},methods:{startSaveTimeout(){null===this.saveTimeout&&(this.saveTimeout=setInterval((()=>{this.mynote.body!==this.note.body&&this.saveNote()}),1e3))},clearSaveTimeout(){clearInterval(this.saveTimeout),this.saveTimeout=null},saveNote(){this.$emit("savenote",{...this.mynote})},saveTags(){this.$emit("updatetags",this.mynote.tags)}},mounted(){this.startSaveTimeout()},destroyed(){this.clearSaveTimeout(),this.$emit("")}},C=$,B=(0,N.Z)(C,j,A,!1,null,null,null),F=B.exports;const P={id:1,title:"New Title",body:"content Goes Here",lastSaved:null};var E={data(){return{note:{},notetemp:{},mode:"list",notes:[],tags:[],isMobile:window.isMobile}},components:{SideList:O,Note:F},methods:{changeMode(e){this.mode=e},handleSetNote(e){this.note=e,this.mode="view"},handleAddNote(){var e="id"+Math.random().toString(16).slice(2);this.note={...P,id:e,created:new Date,updated:new Date},this.notes.push({...this.note}),this.saveOrUpdateNote({...this.note})},saveOrUpdateNote(e){console.log("note",e),u(e.id).then((t=>(console.log("obj",t),t?m(e):h(e)))).then((e=>{console.log("done",e)}))},handleSaveNote(e){this.notetemp={...e,created:e.created||new Date,updated:new Date};const t={...this.notetemp};this.notes=this.notes.map((e=>e.id===t.id?t:e)),this.saveOrUpdateNote(t)},storeNotes(){localStorage.setItem("notes",JSON.stringify(this.notes))},async handleRemoveNote(e){this.notes=this.notes.filter((t=>t.id!==e.id)),this.note.id===e.id&&(this.notes.length?this.handleSetNote(this.notes[0]):this.handleAddNote()),await g(e.id)},handleUpdateTags(e){e=[...this.tags,...e],this.tags=[...new Set(e)],localStorage.setItem("tags",JSON.stringify(this.tags))}},async mounted(){try{let e=await p(),t=localStorage.getItem("tags");t&&(this.tags=JSON.parse(t)),e||this.handleAddNote(),this.notes=e,this.notes.length?this.isMobile||this.handleSetNote(this.notes[0]):this.handleAddNote()}catch(e){this.notes=[]}}},U=E,I=(0,N.Z)(U,r,i,!1,null,"30c32e0c",null),L=I.exports,z={name:"App",components:{DashBoard:L}},R=z,Z=(0,N.Z)(R,s,a,!1,null,null,null),J=Z.exports,q=o(4337);(0,q.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var H=o(5114),V=o.n(H),Y=o(8596);n["default"].use(V(),{locale:Y.Z}),n["default"].config.productionTip=!1,new n["default"]({render:e=>e(J)}).$mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,a){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],a=e[d][2];for(var i=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,r=n[0],i=n[1],l=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var d=l(o)}for(t&&t(n);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self["webpackChunknote_app"]=self["webpackChunknote_app"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(2229)}));n=o.O(n)})();
//# sourceMappingURL=app.4d42bdbf.js.map